params {

    // Raw data directory
    dataDir                 = null
    scriptDir               = "${projectDir}/bin/"

    // Output directory
    analysisDir             = null


    // Analysis specific parameters
    samplesheet             = null
    runID                   = null

    // MinION specific paraters
    
    /// conditional argument for IP address
    minion_ip = minion_ID == 1 ? '10.80.155.184' : 
                    minion_ID == 2 ? '10.80.155.84' : 
                '10.80.155.184'
    minion_password       = minit

    // Artic paramters
    min_len             = null // need to check requirements
    max_len             = null // check requirements of artic
    max_softclip_length = null
    normalise           = 200
    min_depth           = 50
    min-mapq MIN_MAPQ   = 20
    scheme_name         = "SARS-CoV-2"
    scheme_version      = "ARTIC/V3"
    list_schemes        = false

}

profiles {

    conda_on {
        conda = true
        mamba = true
    }

    docker_on {
        enabled = true
        // this ensures container is run as host user and group, but
        //    also adds host user to the within-container group
        runOptions = "--user \$(id -u):\$(id -g) --group-add 100"
    }

    singularity_on {
        enabled = true
        autoMounts = true
    }

    process { 

        shell               = ['/bin/bash', '-euo', 'pipefail']

        
        withName: ARTIC_ANALYSIS {

        }

        withName: PANGOLIN_ANALYSIS {

        }

        withName: NEXTCLADE_ANALYSIS {

        }

    }

manifest {
    mainScript = 'main.nf'
    nextflowVersion = '>=20.04.0'
}

// Pull the epi2me-labs/wf-artic workflow
includeConfig 'https://github.com/epi2me-labs/wf-artic.git'

}